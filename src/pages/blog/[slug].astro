---
import Layout from '../../layouts/Layout.astro';
import { Navbar } from '../../components/Navbar';
import { Footer } from '../../components/Footer';
import { CTA } from '../../components/CTA';
import { blogs } from '../../data/blogs';
import { Calendar, Clock, User, ArrowLeft, Tag } from 'lucide-react';
import { marked } from 'marked';
import { Image } from 'astro:assets';

export function getStaticPaths() {
  return blogs.map(blog => ({
    params: { slug: blog.slug },
    props: { blog },
  }));
}

const { blog } = Astro.props;
const contentHtml = marked.parse(blog.content);
---

<Layout title={`${blog.title} | Aizaz Studio Blog`}>
  <div class="min-h-screen bg-black text-white selection:bg-primary-500/30 selection:text-primary-200 overflow-x-hidden">
    <Navbar client:load />
    
    <main class="pt-32 pb-24">
      
      {/* Back Link */}
      <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 mb-12">
        <a href="/blog" class="inline-flex items-center gap-2 text-zinc-500 hover:text-white transition-colors text-sm font-medium group">
          <ArrowLeft size={16} class="group-hover:-translate-x-1 transition-transform" />
          Back to Blog
        </a>
      </div>

      {/* Article Header */}
      <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 mb-16">
        <div class="flex items-center gap-3 mb-6">
          <span class="px-3 py-1 rounded-full bg-primary-500/10 border border-primary-500/20 text-primary-400 text-xs font-bold uppercase tracking-wider">
            {blog.category}
          </span>
          <span class="text-zinc-500 text-sm">â€¢</span>
          <span class="text-zinc-500 text-sm flex items-center gap-1.5">
            <Calendar size={14} /> {blog.date}
          </span>
        </div>
        
        <h1 class="text-3xl md:text-5xl font-display font-bold text-white mb-8 leading-tight">
          {blog.title}
        </h1>

        <div class="flex items-center justify-between border-y border-white/10 py-6">
          <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center text-zinc-400 font-bold">
              {blog.author.charAt(0)}
            </div>
            <div>
              <div class="text-sm font-bold text-white">{blog.author}</div>
              <div class="text-xs text-zinc-500">Author</div>
            </div>
          </div>
          <div class="flex items-center gap-2 text-sm text-zinc-400">
            <Clock size={16} />
            {blog.readTime}
          </div>
        </div>
      </div>

      {/* Hero Image */}
      <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 mb-16">
        <div class="aspect-video rounded-2xl overflow-hidden border border-white/10 shadow-2xl">
          <Image 
            src={blog.image} 
            alt={blog.title}
            class="w-full h-full object-cover"
          />
        </div>
      </div>

      {/* Content */}
      <article class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="prose prose-invert prose-lg max-w-none prose-headings:font-display prose-headings:font-bold prose-a:text-primary-400 prose-a:no-underline hover:prose-a:underline prose-img:rounded-xl">
          <div set:html={contentHtml} />
        </div>

        {/* Tags */}
        {blog.tags && (
          <div class="mt-16 pt-8 border-t border-white/10">
            <div class="flex flex-wrap gap-2">
              {blog.tags.map(tag => (
                <span class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-zinc-900 border border-white/5 text-sm text-zinc-400 hover:text-white hover:border-white/20 transition-colors cursor-default">
                  <Tag size={14} />
                  {tag}
                </span>
              ))}
            </div>
          </div>
        )}
      </article>

      <div class="mt-32">
        <CTA client:visible />
      </div>
    </main>
    <Footer client:visible />
  </div>
</Layout>
